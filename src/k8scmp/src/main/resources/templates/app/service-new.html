<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
	<head th:include="/public/commonframe :: cssScript" />
	<body>
		<div id="common-header">
			<div th:include="/public/commonframe :: app-header"></div>
		</div>
		<div id="content">
			<div id="content-header">
				<h2>添加服务</h2>
			</div>
			<div id="breadcrumb">
				<a href="/app" class="tip-bottom" title="应用管理">应用管理</a>
				<a href="/app/service/service-mgmt" class="tip-bottom" title="应用管理">服务管理</a>
				<a href="#" class="current" title="新建应用">添加服务</a>
			</div>
			<div class="container-fluid">
				<div class="row-fluid">
					<div class="span12">
						<div class="widget-box">
							<div class="widget-title">
								<span class="icon">
									<i class="icon-th-list"></i>
								</span>
								<h5>添加服务</h5>
							</div>
							
							<form method="post" class="form-horizontal" novalidate="novalidate" id="createServiceForm">
								<div class="widget-content" id="service-new1" style="display: block">
									<div class="control-group">
                                        <label class="control-label required">服务名称</label>
                                        <div class="controls">
                                            <input id="serviceName" class="normaltext" type="text" placeholder="输入服务名称（字母数字）..." style="font-style: italic;font-size: 13px"/>
                                        </div>
	                                </div>
	                                <div class="control-group">
                                        <label class="control-label">启动顺序</label>
                                        <div class="controls">
                                            <input id="startSeq" class="normaltext" type="text" placeholder="定义服务启先后顺序..." style="font-style: italic;font-size: 13px"/>
                                        </div>
	                                </div>
									<div class="control-group">
                                        <label class="control-label">服务描述</label>
                                        <div class="controls">
                                            <textarea id="serviceDescription" rows="3" cols="5"></textarea>
                                        </div>
	                                </div>
									<div class="control-group">
                                        <label class="control-label">配置方式</label>
                                        <div class="controls">
											<label style="float: left"><input type="radio" name="cfradios" value="CUSTOM" checked="checked"/>界面配置</label>
											<label style="float: left"><input type="radio" name="cfradios" value="YAML"/>YAML</label>
										</div>
	                                </div>
	                                <div class="control-group">
	                                	<label class="control-label">实例个数</label>
	                                	<div class="controls">
											<input id="defaultReplicas" type="text" class="normaltext"/>
											<span class="help-block" style="font-size:13px">实例在集群中启动的副本数</span>
										</div>
	                                </div>

									 <div class="form-actions" style="text-align: left;padding-left: 40%">
										<button class="btn-primary btn-mini cancleService" type="button">取消</button>&nbsp;&nbsp;&nbsp;
										<button id="btnnew1next" class="btn-primary btn-mini" type="button">下一步</button>
									</div>
									<input id="appCode" type="hidden" th:value="@{appCode}"/>
								</div>
								
								<div class="widget-content" id="service-new2" style="display: none;">
									<div class="control-group">
                                        <label class="control-label-left">选择镜像</label>
                                        <div class="controls-left">
                                            <input type="text" placeholder="输入服务名称（字母数字）..." style="font-style: italic;font-size: 13px;width: 87%"/>
                                            <a href="#myModal" data-toggle="modal" class="btn btn-primary" style="font-size: 13px;">添加</a>
                                            <a title="点击添加按钮，在弹出的页面中，输入
												镜像名称进行查询，被选中的镜像会显示在
												镜像列表里，单击每个镜像进行配置。" class="tip-top">
												<i class="icon-question-sign"></i>
											</a>
                                        </div>
	                                </div>
									<div class="control-group">
                                        <label class="control-label-left">镜像仓库</label>
                                        <div class="controls-left">
                                        	 <span id="imageRep" class="label">http://123.com</span>
                                        </div>
	                                </div>
	                                <div class="control-group">
										<div class="widget-title">
											<h5>镜像列表</h5>
										</div>
										<div class="widget-content nopadding">										
										<table class="table table-bordered image-table display" style="width:100%">
											<thead>
												<tr>
													<th class="i10">镜像名称</th>
													<th class="i20">镜像仓库</th>
													<th class="i30">版本</th>
													<th class="i40">配置</th>
												</tr>
											</thead>
											<tbody id="tBody">
												<!-- <tr>
													<td class="i10">
													dev-test/java
													</td>
													<td class="i20">
													http://123.com
													</td>
													<td class="i30">
													1.2
													</td>
													<td class="i40">
													<a title="配置" class="tip-bottom iconOperation" href="#service-new3" data-toggle="modal" onclick="showImageConfiguration('dev-test/java');"><i class="icon-edit"></i><span>配置</span></a>
							        				<a title="删除" class="tip-bottom iconOperation" href="deleteImage();"><i class="icon-trash"></i><span>删除</span></a>
													</td>
												</tr> -->
											    <tr th:each="images,itState:(${versions==null?versions:versions[0].containerDrafts})">
											        <td class="i10" th:text="${images.image}"></td>
											        <td class="i20" th:text="${images.registry}"></td>
											        <td class="i30" th:text="${images.tag}"></td>
											        <td class="i40">
														<a title="配置" class="tip-bottom iconOperation" href="#service-new3" data-toggle="modal" onclick="showImageConfiguration(${images.image}+${images.registry},${images.volumeMountDrafts});"><i class="icon-edit"></i><span>配置</span></a>
								        				<a title="删除" class="tip-bottom iconOperation" href="deleteImage();"><i class="icon-trash"></i><span>删除</span></a>
													</td>
											    </tr>
											</tbody>
										</table>							
										</div>
	                                </div>
									<div class="form-actions">
										<button class="btn-primary btn-mini cancleService" type="button">取消</button>&nbsp;&nbsp;&nbsp;
										<button id="btnnew2pre" class="btn-primary btn-mini" type="button">上一步</button>&nbsp;&nbsp;&nbsp;
										<button id="btnnew2next" class="btn-primary btn-mini" type="button">下一步</button>
									</div>
								</div>
							
								<div class="modal hide" id="service-new3">
									<div class="modal-header">
										<button data-dismiss="modal" class="close" type="button">×</button>
										<h3>配置镜像</h3>
									</div>
									<div class="modal-body">
										<div>
		                                    <label class="modalStyle" style="padding-right: 10px;">挂载存储</label>
	                                        <a title="添加挂载存储" class="tip-bottom" href="javascript:void(0);" onclick="showStorage();"><i class="icon-plus"></i></a>
	                                    		<br/>
	                                    		<br/>
	                                    		<div id="storages">
	                                    			
	                                    		</div>
	                                    		<br/>
		                                </div>
										<div>
		                                    <label class="modalStyle" style="padding-right: 10px;">启动命令</label>
		                                    <input class="modalStyle" type="text"/>
		                                </div>
										<div style="padding-top: 40px;">
		                                    <label class="modalStyle" style="padding-right: 10px;">环境变量</label>
											<input class="modalStyle" type="text" placeholder="环境变量以键值对key=value形式保存，以逗号,分割" style="font-style: italic;font-size: 13px"/>
		                                </div>
		                                <div style="padding-top: 40px;">
		                                	<label class="modalStyle" style="padding-right: 10px;">容器大小</label>
	                                	 	<span class="modalStyle">CPU(个)<input type="text" class="combine tip-top"/></span>&nbsp;&nbsp;&nbsp;
											<span class="modalStyle">内存(MB)<input type="text" class="combine tip-top"/></span>
		                                </div>
										<div style="float: right;">
											<button class="btn-primary btn-mini cancleService" type="button">取消</button>&nbsp;&nbsp;&nbsp;
											<button id="btnnew3pre" class="btn-primary btn-mini" type="button">确定</button>
										</div>
									</div>
								</div>
							
								<div class="widget-content" id="service-new4" style="display: none">
									<div class="control-group">
                                    	<label class="control-label-YAML">YAML配置示例</label>
	                                </div>
									<div class="control-group">
	                                    <div>
	                                    	<ul style="list-style:none;">
	                                    		<li>containers:</li>
	                                    		<li>- image: "pub.test/registry:2.3</li>
	                                    		<li> name: "test-container"</li>
	                                    		<li> volumeMounts:</li>
	                                    		<li> - mountPath: "/test-hostpath"</li>
	                                    		<li>  name: "test-volume"</li>
	                                    		<li>volumes:</li>
	                                    		<li>- hostPath:</li>
	                                    		<li> path: "/opt/scs"</li>
	                                    		<li> name: "test-volume"</li>
	                                    	</ul>
	                                    </div>
	                                </div>
									<div class="textarea-left">
										<textarea id="yamlSpec" class="wholewidth" rows="5"></textarea>
	                                </div>
									<div class="form-actions" style="text-align: left;padding-left: 40%">
										<button class="btn-primary btn-mini cancleService" type="button">取消</button>&nbsp;&nbsp;&nbsp;
										<button id="btnnew4pre" class="btn-primary btn-mini" type="button">上一步</button>&nbsp;&nbsp;&nbsp;
										<button id="btnnew4pre" class="btn-primary btn-mini" type="submit">提交</button>
									</div>
								</div>
							</form>
						
						<div id="myModal" class="modal hide">
							<div class="modal-header">
								<button data-dismiss="modal" class="close" type="button">×</button>
								<h3>选择镜像</h3>
							</div>
							<div class="modal-body">
	                            <div style="padding-bottom: 6%;">
	                                <label class="modalStyle" style="padding-right: 10px;">镜像仓库</label>
	                                <label class="modalStyle" id="registry">http://123.com</label>
	                            </div>
	                            <div>
	                            	<label class="modalStyle" style="padding-right: 10px;">选择镜像</label>
                                 	<div class="input-append">
					            		<input class="global_filter" id="global_filter" type="text" placeholder="请输入查询内容" style="font-style: italic;font-size: 13px"/><button class="btn prepend" type="button"><i class="icon-search"></i> </button>
					            	</div> 
	                             </div>
	                            <div class="control-group">
	                                <div class="row-fluid">
									<div class="span12">
										<div class="widget-box">
											<div class="widget-title">
												<h5>镜像列表</h5>
											</div>
											<div class="widget-content nopadding">
												<table class="table table-bordered image-table display" style="width: 100%;table-layout: fixed;">
													<thead>
														<tr>
															<th style="width: 26%;">选择</th>
															<th style="width: 26%;">镜像仓库</th>
															<th style="width: 26%;">镜像名称</th>
															<th style="width: 26%;">版本</th>
														</tr>
													</thead>
													<tbody id="tBody">
													<tr>
														<td style="width: 26%;"><input type="checkbox"/></td>
														<td id="registry" style="width: 26%;" >http://123.com</td>
														<td id="id" style="width: 26%;" >test-java</td>
														<td id="versions" style="width: 26%;">
																<select name="versions">
																	<option value="6.0">6.0</option>
																	<option value="7.0">7.0</option>
																	<option value="8.0">8.0</option>
																</select>
															
														</td>
													</tr>
													<tr>
														<td style="width: 26%;"><label><input type="checkbox"/></label></td>
														<td id="registry" style="width: 26%;" >http://123.com</td>
														<td id="id" style="width: 26%;" >dev-mysql</td>
														<td id="versions" style="width: 26%;">
																<select name="versions">
																	<option value="6.0">6.0</option>
																	<option value="7.0">7.0</option>
																	<option value="8.0">8.0</option>
																</select>
															
														</td>
													</tr>
													<tr>
														<td style="width: 26%;"><label><input type="checkbox"/></label></td>
														<td id="registry" style="width: 26%;" >http://123.com</td>
														<td id="id" style="width: 26%;" >nginx</td>
														<td id="versions" style="width: 26%;">
																<select name="versions">
																	<option value="6.0">6.0</option>
																	<option value="7.0">7.0</option>
																	<option value="8.0">8.0</option>
																</select>
															
														</td>
													</tr>
													<tr>
														<td style="width: 26%;"><label><input type="checkbox"/></label></td>
														<td id="registry" style="width: 26%;" >http://123.com</td>
														<td id="id" style="width: 26%;" >tomcat</td>
														<td id="versions" style="width: 26%;">
																<select name="versions">
																	<option value="6.0">6.0</option>
																	<option value="7.0">7.0</option>
																	<option value="8.0">8.0</option>
																</select>
															
														</td>
													</tr>
													    <!-- <tr th:each="image,itState:${chooseImagesList}">
													    	<td style="width: 33%;"><input type="checkbox" id="title-table-checkbox" name="title-table-checkbox" /></td>
													        <td style="width: 33%;" th:text="${image.id}"></td>
													        <td style="width: 33%;" th:text="${image.version}"></td>
													    </tr> -->
													</tbody>
												</table>							
											</div>
										</div>				
									</div>
									</div>
	                               </div>
	                                <div style="text-align: left;padding-left: 35%">
										<button class="btn-mini btn-primary cancleService" type="button">取消</button>&nbsp;&nbsp;&nbsp;
										<button id="imagesbtn" class="btn-mini btn-primary" type="button">确定</button>&nbsp;&nbsp;&nbsp;
									</div>
								</div>
							</div>
							</div>
						</div>
					</div>
				<div id="common-footer">
					<div th:include="/public/commonframe::app-footer"></div>
				</div>
			</div>
		</div> 
	</body>
	<div th:include="/public/commonframe::jsScript(activeMenuNumber=3)" ></div>
	<script th:src="@{/js/app/service-new.js}"></script>
</html>